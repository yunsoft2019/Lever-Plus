# 测试 3.1 和 3.2 改进的命令

## 正确的训练命令

根据 README.md 的格式，正确的命令应该是：

```bash
CUDA_VISIBLE_DEVICES=7 python -m lever_lm.workflows.grpo_post_train \
    --beam_data "./results/okvqa/generated_data/rl_data_RandSampler_Qwen2_5-VL-3B-Instruct.json" \
    --img_emb "./results/okvqa/cache/query_embeddings.pt" \
    --sft_ckpt "./results/okvqa/model_cpk/v2/Qwen2_5_VL_3B_Instruct_RandSampler_infoscore_left_beam5_shot2_cand64_sample800_epoch=12_train=21.93316_val=21.99296.ckpt" \
    --output_dir "./results/okvqa/model_cpk/v3_test" \
    --device cuda:7
```

## 参数说明

- `--beam_data`: RL 数据路径（必需）
- `--img_emb`: Query embeddings 路径（必需，注意参数名是 `img_emb` 不是 `query_emb`）
- `--sft_ckpt`: SFT checkpoint 路径（可选，如果不提供则从头训练）
- `--output_dir`: 输出目录（必需）
- `--device`: 设备（必需）

## 默认参数（已修改）

根据 3.1 的改进，默认参数已经是：
- `--rce_epochs 5`（RCE-only baseline）
- `--grpo_epochs 0`（不执行 GRPO）

所以上面的命令会自动使用 RCE-only 模式，训练 5 个 epoch 后结束。

## 预期输出

应该会看到：
1. Checkpoint 加载时的参数检查信息（3.2 改进）
2. RCE 训练 5 个 epoch
3. 最后提示："⚠️ GRPO epochs == 0，仅进行 RCE 预热，不执行 GRPO。"







