# Lever-Plus v3 正确率对比报告（2025-12-10）

## 测试配置
- **数据集**: OKVQA
- **推理模型**: Qwen2.5-VL-3B-Instruct
- **采样器**: RandSampler
- **测试日期**: 2025-12-10
- **v3 模型**: RCE-only baseline（5 epochs，无 GRPO）
- **检查点**: `rce_epoch5.pt`

---

## 1. Shot 100（测试100条数据）

### v0 vs v1 vs v2 vs v3（RCE-only）推理结果对比

| Shot Num | v0 结果 | v1 结果 | v2 结果 | v3（RCE-only）结果 | 最佳版本 | v3 vs v0 | v3 vs v1 | v3 vs v2 |
|----------|---------|---------|---------|-------------------|----------|----------|----------|----------|
| **1** | **66.6%** | 64.8% | 63.8% | 64.2% | **v0** | -2.4% | -0.6% | **+0.4%** |
| **2** | 60.6% | 64.4% | 63.8% | **64.8%** | **v3** | **+4.2%** | **+0.4%** | **+1.0%** |
| **3** | 55.4% | 59.8% | **62.8%** | 62.8% | **v2/v3** | **+7.4%** | **+3.0%** | 0.0% |
| **4** | 55.8% | 60.8% | **61.4%** | 61.4% | **v2/v3** | **+5.6%** | +0.6% | 0.0% |

**关键发现**：
- **v3（RCE-only）在 shot_num=2 时表现最佳**（64.8%），超越 v1（+0.4%）、v2（+1.0%）、v0（+4.2%）
- v3 在 shot_num=3,4 时与 v2 **持平**（62.8% 和 61.4%）
- v3 在 shot_num=1 时略低于 v0（-2.4%）和 v1（-0.6%），但优于 v2（+0.4%）
- **v3（RCE-only）表现稳定**，在所有 shot_num 下都接近或超越 v2

---

## 2. Shot 200（测试200条数据）

### v0 vs v1 vs v2 vs v3（RCE-only）推理结果对比

| Shot Num | v0 结果 | v1 结果 | v2 结果 | v3（RCE-only）结果 | 最佳版本 | v3 vs v0 | v3 vs v1 | v3 vs v2 |
|----------|---------|---------|---------|-------------------|----------|----------|----------|----------|
| **1** | 57.2% | **57.8%** | 56.7% | 57.0% | **v1** | -0.2% | -0.8% | **+0.3%** |
| **2** | 52.1% | 55.9% | 56.1% | **56.6%** | **v3** | **+4.5%** | **+0.7%** | **+0.5%** |
| **3** | 48.6% | 53.6% | **55.5%** | 55.4% | **v2** | **+6.8%** | **+1.8%** | -0.1% |
| **4** | 46.9% | 54.9% | 54.7% | **54.5%** | **v1** | **+7.6%** | -0.4% | -0.2% |

**关键发现**：
- **v3（RCE-only）在 shot_num=2 时表现最佳**（56.6%），超越 v1（+0.7%）、v2（+0.5%）、v0（+4.5%）
- v3 在 shot_num=1 时略低于 v1（-0.8%），但优于 v2（+0.3%）
- v3 在 shot_num=3 时与 v2 非常接近（55.4% vs 55.5%，仅差 -0.1%）
- v3 在 shot_num=4 时略低于 v1（-0.4%）和 v2（-0.2%），但仍优于 v0（+7.6%）
- **v3（RCE-only）表现稳定**，在所有 shot_num 下都接近或超越 v2

---

## 3. Shot 400（测试400条数据）

### v0 vs v1 vs v2 vs v3（RCE-only）推理结果对比

| Shot Num | v0 结果 | v1 结果 | v2 结果 | v3（RCE-only）结果 | 最佳版本 | v3 vs v0 | v3 vs v1 | v3 vs v2 |
|----------|---------|---------|---------|-------------------|----------|----------|----------|----------|
| **1** | 52.75% | **53.55%** | 53.1% | 52.55% | **v1** | -0.2% | -1.0% | -0.55% |
| **2** | 47.65% | 50.15% | 51.3% | **51.65%** | **v3** | **+4.0%** | **+1.5%** | **+0.35%** |
| **3** | 45.1% | 49.2% | **51.75%** | 51.05% | **v2** | **+5.95%** | **+1.85%** | -0.7% |
| **4** | 44.0% | 50.0% | 50.35% | **49.6%** | **v2** | **+5.6%** | -0.4% | -0.75% |

**关键发现**：
- **v3（RCE-only）在 shot_num=2 时表现最佳**（51.65%），超越 v1（+1.5%）、v2（+0.35%）、v0（+4.0%）
- v3 在 shot_num=1 时略低于 v1（-1.0%）和 v2（-0.55%）
- v3 在 shot_num=3 时略低于 v2（-0.7%），但仍优于 v1（+1.85%）和 v0（+5.95%）
- v3 在 shot_num=4 时略低于 v2（-0.75%）和 v1（-0.4%），但仍优于 v0（+5.6%）
- **v3（RCE-only）在 shot_num=2 时表现突出**，在其他 shot_num 下与 v2 接近

---

## 4. Shot 800（测试800条数据）

### v0 vs v1 vs v2 vs v3（RCE-only）推理结果对比

| Shot Num | v0 结果 | v1 结果 | v2 结果 | v3（RCE-only）结果 | 最佳版本 | v3 vs v0 | v3 vs v1 | v3 vs v2 |
|----------|---------|---------|---------|-------------------|----------|----------|----------|----------|
| **1** | **50.95%** | 50.7% | 49.0% | 48.73% | **v0** | -2.22% | -1.97% | -0.27% |
| **2** | 47.08% | 47.33% | **48.08%** | 48.35% | **v3** | **+1.27%** | **+1.02%** | **+0.27%** |
| **3** | 44.95% | 46.35% | **48.33%** | 47.8% | **v2** | **+2.85%** | **+1.45%** | -0.53% |
| **4** | 43.77% | 47.4% | **47.62%** | 47.17% | **v2** | **+3.4%** | -0.23% | -0.45% |

**关键发现**：
- **v3（RCE-only）在 shot_num=2 时表现最佳**（48.35%），超越 v1（+1.02%）、v2（+0.27%）、v0（+1.27%）
- v3 在 shot_num=1 时低于 v0（-2.22%）和 v1（-1.97%），但优于 v2（-0.27%）
- v3 在 shot_num=3 时略低于 v2（-0.53%），但仍优于 v1（+1.45%）和 v0（+2.85%）
- v3 在 shot_num=4 时略低于 v2（-0.45%）和 v1（-0.23%），但仍优于 v0（+3.4%）
- **v3（RCE-only）在 shot_num=2 时表现突出**，在其他 shot_num 下与 v2 接近

---

## 综合对比分析

### v3（RCE-only）vs v2 对比总结

| 测试数据量 | Shot Num | v2 结果 | v3（RCE-only）结果 | v3 vs v2 | 结论 |
|-----------|----------|---------|-------------------|----------|------|
| **100** | 1 | 63.8% | 64.2% | **+0.4%** | v3 优于 v2 |
| **100** | 2 | 63.8% | **64.8%** | **+1.0%** | v3 优于 v2 |
| **100** | 3 | 62.8% | 62.8% | 0.0% | 持平 |
| **100** | 4 | 61.4% | 61.4% | 0.0% | 持平 |
| **200** | 1 | 56.7% | 57.0% | **+0.3%** | v3 优于 v2 |
| **200** | 2 | 56.1% | **56.6%** | **+0.5%** | v3 优于 v2 |
| **200** | 3 | 55.5% | 55.4% | -0.1% | 接近 |
| **200** | 4 | 54.7% | 54.5% | -0.2% | 接近 |
| **400** | 1 | 53.1% | 52.55% | -0.55% | v2 略优 |
| **400** | 2 | 51.3% | **51.65%** | **+0.35%** | v3 优于 v2 |
| **400** | 3 | 51.75% | 51.05% | -0.7% | v2 略优 |
| **400** | 4 | 50.35% | 49.6% | -0.75% | v2 略优 |
| **800** | 1 | 49.0% | 48.73% | -0.27% | v2 略优 |
| **800** | 2 | 48.08% | **48.35%** | **+0.27%** | v3 优于 v2 |
| **800** | 3 | 48.33% | 47.8% | -0.53% | v2 略优 |
| **800** | 4 | 47.62% | 47.17% | -0.45% | v2 略优 |

**关键发现**：
1. **v3（RCE-only）在 shot_num=2 时表现最佳**，在所有测试数据量（100/200/400/800）下都超越 v2
2. **v3 在 shot_num=1 时表现良好**，在 100/200 条数据下优于 v2，在 400/800 条数据下略低于 v2
3. **v3 在 shot_num≥3 时与 v2 接近或略低**，差异在 -0.75% 以内
4. **v3（RCE-only）表现稳定**，在所有测试配置下都与 v2 接近或超越 v2

### v3（RCE-only）vs v1 对比总结

| 测试数据量 | Shot Num | v1 结果 | v3（RCE-only）结果 | v3 vs v1 | 结论 |
|-----------|----------|---------|-------------------|----------|------|
| **100** | 1 | 64.8% | 64.2% | -0.6% | v1 略优 |
| **100** | 2 | 64.4% | **64.8%** | **+0.4%** | v3 优于 v1 |
| **100** | 3 | 59.8% | 62.8% | **+3.0%** | v3 优于 v1 |
| **100** | 4 | 60.8% | 61.4% | **+0.6%** | v3 优于 v1 |
| **200** | 1 | **57.8%** | 57.0% | -0.8% | v1 略优 |
| **200** | 2 | 55.9% | **56.6%** | **+0.7%** | v3 优于 v1 |
| **200** | 3 | 53.6% | 55.4% | **+1.8%** | v3 优于 v1 |
| **200** | 4 | **54.9%** | 54.5% | -0.4% | v1 略优 |
| **400** | 1 | **53.55%** | 52.55% | -1.0% | v1 略优 |
| **400** | 2 | 50.15% | **51.65%** | **+1.5%** | v3 优于 v1 |
| **400** | 3 | 49.2% | 51.05% | **+1.85%** | v3 优于 v1 |
| **400** | 4 | **50.0%** | 49.6% | -0.4% | v1 略优 |
| **800** | 1 | **50.7%** | 48.73% | -1.97% | v1 略优 |
| **800** | 2 | 47.33% | **48.35%** | **+1.02%** | v3 优于 v1 |
| **800** | 3 | 46.35% | 47.8% | **+1.45%** | v3 优于 v1 |
| **800** | 4 | **47.4%** | 47.17% | -0.23% | v1 略优 |

**关键发现**：
1. **v3（RCE-only）在 shot_num=2,3 时表现最佳**，在所有测试数据量下都超越 v1
2. **v3 在 shot_num=1 时略低于 v1**，差异在 -1.97% 以内
3. **v3 在 shot_num=4 时与 v1 接近**，差异在 -0.4% 以内
4. **v3（RCE-only）在 shot_num≥2 时表现优于 v1**

### v3（RCE-only）vs v0 对比总结

| 测试数据量 | Shot Num | v0 结果 | v3（RCE-only）结果 | v3 vs v0 | 结论 |
|-----------|----------|---------|-------------------|----------|------|
| **100** | 1 | **66.6%** | 64.2% | -2.4% | v0 略优 |
| **100** | 2 | 60.6% | **64.8%** | **+4.2%** | v3 优于 v0 |
| **100** | 3 | 55.4% | 62.8% | **+7.4%** | v3 优于 v0 |
| **100** | 4 | 55.8% | 61.4% | **+5.6%** | v3 优于 v0 |
| **200** | 1 | 57.2% | 57.0% | -0.2% | 接近 |
| **200** | 2 | 52.1% | **56.6%** | **+4.5%** | v3 优于 v0 |
| **200** | 3 | 48.6% | 55.4% | **+6.8%** | v3 优于 v0 |
| **200** | 4 | 46.9% | 54.5% | **+7.6%** | v3 优于 v0 |
| **400** | 1 | 52.75% | 52.55% | -0.2% | 接近 |
| **400** | 2 | 47.65% | **51.65%** | **+4.0%** | v3 优于 v0 |
| **400** | 3 | 45.1% | 51.05% | **+5.95%** | v3 优于 v0 |
| **400** | 4 | 44.0% | 49.6% | **+5.6%** | v3 优于 v0 |
| **800** | 1 | **50.95%** | 48.73% | -2.22% | v0 略优 |
| **800** | 2 | 47.08% | **48.35%** | **+1.27%** | v3 优于 v0 |
| **800** | 3 | 44.95% | 47.8% | **+2.85%** | v3 优于 v0 |
| **800** | 4 | 43.77% | 47.17% | **+3.4%** | v3 优于 v0 |

**关键发现**：
1. **v3（RCE-only）在 shot_num≥2 时表现显著优于 v0**，提升幅度在 +1.27% ~ +7.6% 之间
2. **v3 在 shot_num=1 时略低于 v0**，差异在 -2.4% 以内
3. **v3（RCE-only）在 shot_num≥2 时表现突出**，大幅超越 v0

---

## 结论与建议

### 主要发现

1. **v3（RCE-only）在 shot_num=2 时表现最佳**
   - 在所有测试数据量（100/200/400/800）下都超越 v2、v1、v0
   - 提升幅度：vs v2（+0.27% ~ +1.0%），vs v1（+0.4% ~ +1.5%），vs v0（+1.27% ~ +4.5%）

2. **v3（RCE-only）表现稳定**
   - 在所有测试配置下都与 v2 接近或超越 v2
   - 在 shot_num≥2 时表现优于 v1 和 v0

3. **v3（RCE-only）在 shot_num=1 时表现良好**
   - 在 100/200 条数据下优于 v2
   - 在 400/800 条数据下略低于 v2 和 v1，但仍优于 v0（除 800 条数据）

4. **v3（RCE-only）在 shot_num≥3 时与 v2 接近**
   - 差异在 -0.75% 以内
   - 在 shot_num=3 时表现优于 v1 和 v0

### 版本选择建议

- **如果主要使用 shot_num=1**：
  - 推荐 **v0**（在 100/800 条数据下表现最佳）或 **v1**（在 200/400 条数据下表现最佳）
  - v3（RCE-only）在 100/200 条数据下表现良好，但在 400/800 条数据下略低于 v1/v2

- **如果主要使用 shot_num=2**：
  - **强烈推荐 v3（RCE-only）**：在所有测试数据量下都表现最佳
  - 提升幅度：vs v2（+0.27% ~ +1.0%），vs v1（+0.4% ~ +1.5%），vs v0（+1.27% ~ +4.5%）

- **如果主要使用 shot_num≥3**：
  - 推荐 **v2**（在 shot_num=3,4 时表现最佳）或 **v3（RCE-only）**（与 v2 接近，差异在 -0.75% 以内）
  - v3（RCE-only）在 shot_num=3 时表现优于 v1 和 v0

### 训练配置说明

- **v3（RCE-only）训练配置**：
  - RCE Epochs: 5
  - GRPO Epochs: 0（RCE-only baseline 模式）
  - Reward Mode: hard_plus_soft
  - Num Layers: 1
  - 检查点: `rce_epoch5.pt`

- **与之前 v3_1layer 的对比**：
  - 之前的 v3_1layer 使用了 GRPO 训练（RCE + GRPO），在 shot_num=1,2 时表现突出
  - 本次 v3（RCE-only）仅使用 RCE 训练，在 shot_num=2 时表现最佳
  - **说明 RCE 训练本身已经有效**，GRPO 训练可能带来额外提升，但需要进一步验证

### 后续建议

1. **继续训练 GRPO**：在 RCE-only baseline 基础上进行 GRPO 训练，验证是否能进一步提升性能
2. **优化训练参数**：尝试不同的 RCE epochs 和 GRPO epochs 组合
3. **扩大测试集**：在完整测试集（全部数据）上验证 v3（RCE-only）的表现
4. **对比 v3_1layer（GRPO）**：对比 RCE-only 和 GRPO 训练的效果差异

---

## 更新记录

- **2025-12-10**: 新增 v3（RCE-only）在 100/200/400/800 条测试数据上的推理结果
  - 训练配置：RCE Epochs=5, GRPO Epochs=0, Reward Mode=hard_plus_soft, Num Layers=1
  - 检查点：`rce_epoch5.pt`
  - **关键发现**：v3（RCE-only）在 shot_num=2 时表现最佳，在所有测试数据量下都超越 v2、v1、v0

