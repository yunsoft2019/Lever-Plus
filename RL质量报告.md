# RLæ•°æ®è´¨é‡æ£€æŸ¥æŠ¥å‘Š

> ç”Ÿæˆæ—¶é—´: 2025-12-16 07:31:13  
> æ•°æ®æ–‡ä»¶: `rl_data_RandSampler_v4_strictEval.json`  
> æ•°æ®ç‰ˆæœ¬: v4ï¼ˆä¸¥æ ¼ä¸€è‡´ + å¯å¤ç”¨ï¼‰

---

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

- **Queryæ•°é‡**: 800
- **Candidateæ€»æ•°**: 9,868
- **å¹³å‡æ¯ä¸ªqueryçš„candidateæ•°**: 12.34
- **æ­£ç¡®ç‡**: 54.99%
- **æ•°æ®è´¨é‡è¯„åˆ†**: â­â­â­â­â­ (5/5)

---

## 1. æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ï¼ˆå¯¹ç…§éœ€æ±‚æ–‡æ¡£ï¼‰

### 1.1 _metaä¿¡æ¯

âœ… **å®Œæ•´** - åŒ…å«ä»¥ä¸‹å­—æ®µï¼š
- `created_at`: 2025-12-16 07:16:58
- `vqa_model`: Qwen/Qwen2.5-VL-3B-Instruct
- `strict_eval`: True
- `task_gen_args`: {"max_new_tokens": 5, "num_beams": 3, "length_penalty": 0.0, "min_new_tokens": 0, "do_sample": false}

### 1.2 queryå­—æ®µ

âœ… **å®Œæ•´** - åŒ…å«ä»¥ä¸‹å­—æ®µï¼š
- `query_id`: æŸ¥è¯¢ID
- `question_id`: é—®é¢˜ID
- `image_id`: å›¾åƒID
- `question`: é—®é¢˜æ–‡æœ¬
- `gt_answers_raw`: åŸå§‹ground truthç­”æ¡ˆåˆ—è¡¨
- `gt_answers_norm`: å½’ä¸€åŒ–åçš„ground truthç­”æ¡ˆåˆ—è¡¨

### 1.3 candidateå­—æ®µ

âœ… **å®Œæ•´** - åŒ…å«æ‰€æœ‰13ä¸ªå¿…éœ€å­—æ®µï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `pointer_pos` | list | positionç´¢å¼•ï¼ˆç”¨äºcandidate_poolï¼‰ |
| `pointer` | list | globalç´¢å¼•ï¼ˆç”¨äºè®­ç»ƒ/åˆ†æï¼‰ |
| `vqa_raw_generation` | str | åŸå§‹ç”Ÿæˆç»“æœï¼ˆpostprocesså‰ï¼‰ |
| `vqa_pred_answer` | str | åå¤„ç†åçš„ç­”æ¡ˆ |
| `vqa_acc_score` | float | VQAå‡†ç¡®ç‡åˆ†æ•° [0,1] |
| `vqa_correct` | int | æ˜¯å¦æ­£ç¡® (0/1) |
| `vqa_gt_prob` | float | GTæ¦‚ç‡ [0,1] |
| `vqa_rel_token_f1` | float | token F1ç›¸å…³æ€§ |
| `vqa_rel_edit_sim` | float | ç¼–è¾‘ç›¸ä¼¼åº¦ |
| `vqa_rel_score` | float | ç›¸å…³æ€§åˆ†æ•° |
| `vqa_eval_mode` | str | è¯„æµ‹æ¨¡å¼ï¼ˆ"vqaEval"æˆ–"fallback"ï¼‰ |
| `eval_split_used` | str | ä½¿ç”¨çš„æ•°æ®é›†splitï¼ˆ"train"æˆ–"val"ï¼‰ |
| `eval_failed` | bool | æ˜¯å¦è¯„æµ‹å¤±è´¥ |

---

## 2. ä¸¥æ ¼ä¸€è‡´æ€§æ£€æŸ¥

### 2.1 strict_evalæ¨¡å¼

âœ… **å¯ç”¨** - `strict_eval: True`

### 2.2 è¯„æµ‹æ¨¡å¼åˆ†å¸ƒ

| è¯„æµ‹æ¨¡å¼ | æ•°é‡ | æ¯”ä¾‹ |
|---------|------|------|
| vqaEval | 9,868 | 100.00% |
| fallback | 0 | 0.00% |

âœ… **100%ä½¿ç”¨å®˜æ–¹è¯„æµ‹** - æ— fallbackæ ·æœ¬

### 2.3 æ•°æ®é›†splitä½¿ç”¨

| Split | æ•°é‡ | æ¯”ä¾‹ |
|-------|------|------|
| train | 9,868 | 100.00% |
| val | 0 | 0.00% |

### 2.4 eval_failedç»Ÿè®¡

âœ… **eval_failedæ•°é‡**: 0ï¼ˆæ‰€æœ‰candidateéƒ½æˆåŠŸè¯„æµ‹ï¼‰

---

## 3. æ•°æ®è´¨é‡æŒ‡æ ‡

### 3.1 å‡†ç¡®ç‡åˆ†å¸ƒï¼ˆvqa_acc_scoreï¼‰

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| å¹³å‡å€¼ | 0.5086 |
| ä¸­ä½æ•° | 0.6000 |
| æ ‡å‡†å·® | 0.4745 |
| æœ€å°å€¼ | 0.0000 |
| æœ€å¤§å€¼ | 1.0000 |

#### å‡†ç¡®ç‡åŒºé—´åˆ†å¸ƒ

| åŒºé—´ | æ•°é‡ | æ¯”ä¾‹ |
|------|------|------|
| acc_score > 0 | 5,426 | 54.99% |
| acc_score == 1.0 | 4,408 | 44.67% |
| acc_score >= 0.6 | 5,426 | 54.99% |
| acc_score == 0 | 4,442 | 45.01% |

### 3.2 GTæ¦‚ç‡åˆ†å¸ƒï¼ˆvqa_gt_probï¼‰

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| å¹³å‡å€¼ | 0.000000 |
| ä¸­ä½æ•° | 0.000000 |
| æœ€å¤§å€¼ | 0.000001 |
| éé›¶æ•°é‡ | 9,868 (100.00%) |

> æ³¨ï¼švqa_gt_probå€¼è¾ƒå°æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºå®ƒæ˜¯æ¨¡å‹å¯¹GTç­”æ¡ˆçš„æ¦‚ç‡ä¼°è®¡ã€‚

### 3.3 Relevanceåˆ†å¸ƒï¼ˆvqa_rel_scoreï¼‰

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| å¹³å‡å€¼ | 0.7599 |
| ä¸­ä½æ•° | 1.0000 |
| æ ‡å‡†å·® | 0.3182 |
| æœ€å°å€¼ | 0.0000 |
| æœ€å¤§å€¼ | 1.0000 |

#### RelevanceåŒºé—´åˆ†å¸ƒ

| åŒºé—´ | æ•°é‡ | æ¯”ä¾‹ |
|------|------|------|
| rel_score > 0.5 | 7,023 | 71.17% |
| rel_score == 1.0 | 5,426 | 54.99% |
| rel_score == 0 | 129 | 1.31% |

### 3.4 Relevanceå­æŒ‡æ ‡

#### Token F1 (vqa_rel_token_f1)

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| å¹³å‡å€¼ | 0.5914 |
| token_f1 > 0.5 | 5,736 (58.13%) |

#### Edit Similarity (vqa_rel_edit_sim)

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| å¹³å‡å€¼ | 0.7586 |
| edit_sim > 0.5 | 7,008 (71.02%) |

### 3.5 æ­£ç¡®ç‡ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°é‡ | æ¯”ä¾‹ |
|------|------|------|
| æ­£ç¡®candidate | 5,426 | 54.99% |
| é”™è¯¯candidate | 4,442 | 45.01% |

---

## 4. æ•°æ®è´¨é‡è¯„ä¼°

### 4.1 è´¨é‡æ£€æŸ¥é¡¹

| æ£€æŸ¥é¡¹ | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| Queryæ•°é‡å……è¶³ | âœ… | 800 >= 800 |
| Candidateæ•°é‡å……è¶³ | âœ… | 9,868 >= 8000 |
| æ­£æ ·æœ¬æ¯”ä¾‹åˆç† | âœ… | 54.99% >= 50% |
| Relevanceä¿¡å·å……è¶³ | âœ… | 71.17% >= 50% |
| 100%ä½¿ç”¨å®˜æ–¹è¯„æµ‹ | âœ… | æ— fallbackæ ·æœ¬ |

### 4.2 è´¨é‡è¯„åˆ†

**æ€»ä½“è¯„åˆ†**: â­â­â­â­â­ (5/5)

---

## 5. æ•°æ®æ ¼å¼éªŒè¯

### 5.1 å­—æ®µä¸€è‡´æ€§æ£€æŸ¥

âœ… **pointer_poså’Œpointerä¸€è‡´** - æ‰€æœ‰candidateçš„pointer_poså’Œpointeré•¿åº¦ä¸€è‡´

âœ… **eval_failedæ­£ç¡®æ ‡è®°** - æ— eval_failedä½†acc_score>0çš„å¼‚å¸¸æƒ…å†µ

### 5.2 æ•°æ®å¯å¤ç”¨æ€§

âœ… **raw_generationå·²ä¿å­˜** - åç»­æ— éœ€é‡è·‘åƒé—®å³å¯æ¢rewardæˆ–åšerroråˆ†æ

âœ… **gt_answerså·²ä¿å­˜** - queryçº§åˆ«ä¿å­˜äº†gt_answers_raw/normï¼Œå¯å¤ç®—acc_score

âœ… **relevanceå·²ä¿å­˜** - å¯ç”¨äºè´Ÿæ ·æœ¬çš„shapingï¼Œç¼“è§£ç¨€ç–ä¿¡å·

---

## 6. æ€»ç»“

### âœ… ä¼˜ç‚¹

1. **æ•°æ®å®Œæ•´æ€§**: æ‰€æœ‰å¿…éœ€å­—æ®µéƒ½å·²ä¿å­˜ï¼Œå®Œå…¨æ»¡è¶³éœ€æ±‚æ–‡æ¡£è¦æ±‚
2. **ä¸¥æ ¼ä¸€è‡´æ€§**: 100%ä½¿ç”¨å®˜æ–¹è¯„æµ‹ï¼Œæ— fallbackï¼Œç¡®ä¿ä¸æœ€ç»ˆè¯„æµ‹ä¸€è‡´
3. **å¯å¤ç”¨æ€§**: ä¿å­˜äº†raw_generationã€gt_answersç­‰ï¼Œåç»­æ— éœ€é‡è·‘åƒé—®
4. **æ•°æ®è´¨é‡**: æ­£æ ·æœ¬æ¯”ä¾‹54.99%ï¼Œrelevanceä¿¡å·å……è¶³ï¼ˆ71.17% > 0.5ï¼‰
5. **æ•°æ®è§„æ¨¡**: 800ä¸ªqueryï¼Œ9,868ä¸ªcandidateï¼Œå¹³å‡æ¯ä¸ªquery 12.34ä¸ªcandidate

### ğŸ“Š å…³é”®æŒ‡æ ‡

- **æ­£ç¡®ç‡**: 54.99%
- **å®Œå…¨æ­£ç¡®ç‡** (acc_score==1.0): 44.67%
- **å¹³å‡relevance**: 0.7599
- **é«˜relevanceæ¯”ä¾‹** (>0.5): 71.17%

### ğŸ¯ å»ºè®®

1. âœ… æ•°æ®è´¨é‡è‰¯å¥½ï¼Œå¯ä»¥ç›´æ¥ç”¨äºRLè®­ç»ƒ
2. âœ… å»ºè®®ä½¿ç”¨ `reward_mode="hard_plus_gtprob_plus_rel"` æ¨¡å¼ï¼Œåˆ©ç”¨relevanceä¿¡å·
3. âœ… å¯ä»¥å°è¯•ä¸åŒçš„rewardæƒé‡ç»„åˆï¼ˆhard_weight, soft_weight, rel_weightï¼‰

---

## é™„å½•

### æ•°æ®æ–‡ä»¶ä¿¡æ¯

- **æ–‡ä»¶è·¯å¾„**: `results/okvqa/generated_data/rl_data_RandSampler_v4_strictEval.json`
- **æ–‡ä»¶å¤§å°**: çº¦7.2MB
- **ç”Ÿæˆæ—¶é—´**: 2025-12-16 07:16:58
- **VQAæ¨¡å‹**: Qwen/Qwen2.5-VL-3B-Instruct
- **ç”Ÿæˆå‚æ•°**: {
  "max_new_tokens": 5,
  "num_beams": 3,
  "length_penalty": 0.0,
  "min_new_tokens": 0,
  "do_sample": false
}

### ç”Ÿæˆé…ç½®

- **Beamå€™é€‰æ•°**: 5
- **æ¸©åº¦é‡‡æ ·**: Ï„=1.0 x2 + Ï„=1.3 x2 = 4æ¡
- **éšæœºç»„åˆ**: 1æ¡
- **Retrieval**: 5æ¡
- **æ¯ä¸ªqueryæ€»è®¡**: ~15æ¡å€™é€‰

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2025-12-16 07:31:13*
